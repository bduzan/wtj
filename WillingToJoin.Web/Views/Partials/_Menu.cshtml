@inherits Umbraco.Web.Mvc.UmbracoViewPage
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    var home = CurrentPage.AncestorOrSelf("home"); 
    var pages = CurrentPage.Site().Children.Where("Visible");    
   // var home = Umbraco.TypedContentAtRoot().Where(x => x.DocumentTypeAlias == "home").SingleOrDefault();
   // var pages = Umbraco.TypedContentAtRoot().SingleOrDefault().Children;
 }

<nav class="x-nav-wrap desktop" role="navigation">
    <ul id="menu-base" class="x-nav">   
        @if (CurrentPage.DocumentTypeAlias == "home") { 
            <li class="menu-item @(home.IsAncestorOrSelf(CurrentPage) ? "current-menu-item" : null)"><a href="@home.Url"><span>@home.Name</span></a></li>   
        }
        else
        {
            <li class="menu-item"><a href="@home.Url"><span>@home.Name</span></a></li>   
        }
        @foreach (var page in pages)
        {
          <li class='menu-item @(page.IsAncestorOrSelf(CurrentPage) ? "current-menu-item" : null)'><a href="@page.Url"><span>@page.Name</span></a></li>
        }                
        <li class="menu-item x-menu-item x-menu-item-search"><a href="#" class="x-btn-navbar-search"><span><i class="x-icon-search" data-x-icon="&#xf002;" aria-hidden="true"></i><span class="x-hidden-desktop"> Search</span></span></a>
        </li>
    </ul>
</nav>



<div class="x-nav-wrap mobile collapse">
    <ul id="menu-base-1" class="x-nav">
        @if (CurrentPage.DocumentTypeAlias == "home")
        {
            <li class="menu-item @(home.IsAncestorOrSelf(CurrentPage) ? "current-menu-item" : null)"><a href="@home.Url"><span>@home.Name</span></a></li>
        }
        else
        {
            <li class="menu-item"><a href="@home.Url"><span>@home.Name</span></a></li>
        }
        @foreach (var page in pages)
        {
            <li class='menu-item @(page.IsAncestorOrSelf(CurrentPage) ? "current-menu-item" : null)'><a href="@page.Url"><span>@page.Name</span></a></li>
        }
        <li class="menu-item x-menu-item x-menu-item-search">
            <a href="#" class="x-btn-navbar-search"><span><i class="x-icon-search" data-x-icon="&#xf002;" aria-hidden="true"></i><span class="x-hidden-desktop"> Search</span></span></a>
        </li>
    </ul>
</div>